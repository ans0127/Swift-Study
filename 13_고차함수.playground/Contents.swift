import UIKit
/**=======================================================================
 âœ¨ê³ ì°¨í•¨ìˆ˜ : input ì´ í•¨ìˆ˜ì´ê±°ë‚˜, outputì´ í•¨ìˆ˜ì¸ í•¨ìˆ˜
                ---> í•¨ìˆ˜ë¥¼ ë°›ì•„ì„œ(ì£¼ë¡œ í´ë¡œì €í•¨ìˆ˜) í•¨ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤.
  ğŸ’  ë§ì´ ì“°ì´ëŠ” ê³ ì°¨í•¨ìˆ˜ 3ê°€ì§€
  - 1) map
  - 2) filter
  - 3) reduce
 =======================================================================*/
//map : mapping  : ë°°ì—´ì˜ ê° ê°’ì„ ìƒˆë¡­ê²Œ ë§µí•‘í•´ì„œ ìƒˆë¡œìš´ ë°°ì—´ì„ ë¦¬í„´ (ë°°ì—´ì— ìˆëŠ” í•¨ìˆ˜ì´ë‹¤.)
//mapì´ ì™œ ë§ì´ ì“°ì¼ê¹Œ? forë¬¸ë³´ë‹¤ëŠ” mapì„ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ dataë¥¼ ë³€í˜•ì‹œí‚¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—!
let numbers = [1, 2, 3, 4, 5]

var aa  = numbers.map { num in
    return num
}

var aa01 = numbers.map {
    return "\($0)"
}

var bb = numbers.map { num2 in
    return (num2 * 1000)        //ìƒˆë¡­ê²Œ ë§µí•‘í•˜ëŠ” ë°©ì‹ ì œê³µ
}


//filter : ì°¸(true)ë¥¼ ë§Œì¡±í•˜ëŠ” ê°’ì„ ê±¸ëŸ¬ì„œ ìƒˆë¡œìš´ ë°°ì—´ì„ ë¦¬í„´
let names = ["red", "yellow", "blue", "green", "white"]

names.filter { str in
    str.contains("r")
}

var array = [2,3,4,5,6,7]
//ì¼ë°˜ì ìœ¼ë¡œ í´ë¡œì €ë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„ì„ í•˜ê³ , ì¼ë°˜ í•¨ìˆ˜ë¡œë„ êµ¬í˜„ì€ í•  ìˆ˜ ìˆë‹¤.
//í´ë¡œì €
var numArray = array.filter { num in
    return num % 2 == 0
}
//í•¨ìˆ˜
func isEven( num : Int) -> Bool{
    return num % 2 == 0
}
//ğŸ’ ğŸ’ ğŸ’ filterëŠ” ë°°ì—´ì„ return í•˜ê¸° ë•Œë¬¸ì— ë‘ë²ˆ ì—°ì†í•´ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
var doublefilter = array.filter { $0 % 2 == 0}.filter { $0 > 2 }




/**=======================================================================
 reduce : ì œê±°í•˜ë‹¤.
 ê° ì•„ì´í…œì„ ê²°í•©í•´ì„œ ë‹¨ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ë¦¬í„´.
 ë°°ì—´ì˜ ê° ê°’ì„ ê²°í•©í•´ì„œ "ì œê±°"í•´ë‚˜ê°€ì„œ,ì¤„ì—¬ì„œ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ë§Œë“¦.
 ë°°ì—´.reduce(0){ í´ë¡œì € } => ë°˜ë“œì‹œ ì´ˆê¸°ê°’, í´ë¡œì €ê°€ í•„ìš”í•˜ë‹¤
 =============================================================================*/

var reduceArray = [0,1,2,3,4,5,6,7,8,9,10]
//reduceArray.reduce(<#T##initialResult: Result##Result#>, <#T##nextPartialResult: (Result, Int) throws -> Result##(Result, Int) throws -> Result##(_ partialResult: Result, Int) throws -> Result#>)
//1. ì´ˆê¸°ê°’ì„ 0ìœ¼ë¡œ í•˜ê³ 
//2. sumì—ëŠ” ì´ˆê¸°ê°’, numì—ëŠ” ì¸ë±ìŠ¤ì˜ 0 ë²ˆì§¸ ê°’ì„ ë„£ê³ ,
//3. return ê°’ì„ ë‹¤ì‹œ ì´ˆê¸°ê°’ì— ë„£ê³  ì‹¤í–‰.
var resultSum = reduceArray.reduce(0) { sum, num in
    return sum + num
}

var minus = reduceArray.reduce(100) { $0 - $1 }
print(minus)



//map, filter, reduceì˜ í•©ì„±
//ë°°ì—´ ì¤‘ í™€ìˆ˜ë§Œ ì œê³±í•´ì„œ, ê·¸ ìˆ«ìë¥¼ ë‹¤ ë”í•œ ê°’ì€?
var complexArray = [0,1,2,3,4,5,6,7,8,9,10]

//complexArray.filter(  $0 % 3 == 0 ).map( $0 * $0 )
complexArray
    .filter { $0 % 2 != 0 }
    .map { $0 * $0 }
    .reduce(0){ $0 + $1 }



//ê¸°íƒ€ ê³ ì°¨í•¨ìˆ˜
/**===================================================================
 forEach : ë°°ì—´ ì•ˆì˜ ê°ê°ì˜ ì•„ì´í…œë“¤ì„ ì‘ì—… í›„ "í•˜ë‚˜í•˜ë‚˜"ë¥¼ ë¦¬í„´í•œë‹¤.
          ( map ê³¼ëŠ” ë‹¤ë¦„! mapì€ ì‘ì—… í›„ ëª¨ì•„ì„œ "ë°°ì—´"ë¡œ ë¦¬í„´í•œë‹¤ )
 ===================================================================*/
let foreachNum = [1,2,3,4,5]

foreachNum.forEach { num in
    print(num)
}

foreachNum.forEach { print("ìˆ«ì : \($0)") }

/**===================================================================
 compactMap
 - mapê¸°ëŠ¥ + ì˜µì…”ë„ì œê±°
 - ì˜µì…”ë„ ìë™ìœ¼ë¡œ ì œê±°, ì˜µì…”ë„ ì•„ë‹Œ ì•„ì´í…œë“¤ì„ ë¦¬í„´í•´ì¤Œ (ì˜µì…”ë„ ë°”ì¸ë”© ê¸°ëŠ¥ ë‚´ì¥  ì˜ˆ. String? -> String )
 ===================================================================*/

var cmArray : [String?] = ["A", nil ,"B", nil, "C"]

var cmRsltArray = cmArray.compactMap { $0 }
print(cmRsltArray)  //["A", "B", "C"]


let cmNumArray = [-2, -1, 0, 1, 2]

var positiveArray = cmNumArray.compactMap { $0 >= 0 ? $0 : nil }
print(positiveArray)    // [nil, nil, 0, 1, 2] -> [0, 1, 2]
// ( = )

var positiveArray2 = cmArray.filter { $0 != nil }.map { $0!}
print(positiveArray2)

/**===================================================================
flatMap
 - map + flat
 - ì¤‘ì²©ëœ ë°°ì—´ì„ ë²—ê²¨ í•˜ë‚˜ì˜ ë°°ì—´ ì•ˆì— ë„£ì–´ì„œ ë¦¬í„´
 - 3ì¤‘ì¤‘ì²©ì¼ ê²½ìš° flatMap 2ë²ˆ ì‚¬ìš©í•˜ë©´ ëœë‹¤
 ===================================================================*/
var nestedArray = [[1,2,3],[4,5,6],[7,8,9]]
print(nestedArray.flatMap{ $0 })

var nestedArray2 = [[[1,2,3],[4,5,6],[7,8,9]]]
var nstArray = nestedArray2.flatMap{$0}.flatMap{$0}



